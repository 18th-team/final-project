<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main-layout}">
<head>
    <title>ëª¨ë½ëª¨ë½ | ë‚˜ì˜ MoBTIëŠ”?</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/mobti.css?v=1}" rel="stylesheet">
</head>
<body>
<div class="container" layout:fragment="content">
    <!-- í…ŒìŠ¤íŠ¸ ì‹œì‘ í˜ì´ì§€ -->
    <div id="start-container">
        <h1>ì†Œëª¨ì„ ì„±í–¥ í…ŒìŠ¤íŠ¸</h1>
        <p>ë‚´ ì„±í–¥ì— ë”± ë§ëŠ” ì†Œëª¨ì„ì„ ì°¾ì•„ë³´ì! ğŸ¯</p>
        <img width="350px" th:src="@{/img/test_main.png}" alt="mobti test">
        <button id="start-button">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸° ğŸš€</button>
    </div>

    <!-- í…ŒìŠ¤íŠ¸ ì§„í–‰ í˜ì´ì§€ -->
    <div id="question-container" style="display: none;">
        <h3 id="question-text"></h3>
        <button class="option" data-choice="0"></button>
        <button class="option" data-choice="1"></button>
        <p id="progress"></p>
    </div>

    <!-- ê²°ê³¼ í˜ì´ì§€ -->
    <!-- ê²°ê³¼ í˜ì´ì§€ -->
    <div id="result-container" style="display: none;">
        <h2>ë‹¹ì‹ ì˜ ì†Œëª¨ì„ ì„±í–¥ì€?</h2>
        <p id="result-text"></p>
        <img id="result-img" width="350px" src="" alt="ê²°ê³¼ ì´ë¯¸ì§€">
        <p id="result-description"></p>
        <button id="restart-button">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸° ğŸ”„</button>
    </div>

</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script layout:fragment="script">
    $(document).ready(function () {
        // "í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ
        $("#start-button").on("click", function () {
            $("#start-container").hide();
            $("#question-container").show();
            showQuestion();
        });

        // ì„ íƒì§€ í´ë¦­ ì‹œ (ì„ íƒì§€ ë‘ ê°œ ëª¨ë‘ class="option"ì´ë¯€ë¡œ)
        $(".option").on("click", function () {
            const choice = parseInt($(this).data("choice"));
            const category = questions[currentQuestionIndex].category;
            scores[questions[currentQuestionIndex].scores[choice]]++;
            currentQuestionIndex++;
            showQuestion();
        });

        // "ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°" ë²„íŠ¼
        $("#restart-button").on("click", function () {
            scores = { L: 0, F: 0, A: 0, T: 0, S: 0, I: 0, E: 0, D: 0 };
            currentQuestionIndex = 0;
            $("#result-container").hide();
            $("#start-container").show();
        });
    });

    const questions = [
        { category: "L/F", text: "ì‹¬ì‹¬í•œë°â€¦ ì†Œëª¨ì„ì„ ì°¾ì•„ë³¼ê¹Œ?", options: ["ì´ê±° ë‚´ê°€ í•˜ë©´ ë” ì˜ ë§Œë“¤ê² ëŠ”ë°? ğŸ¤”", "ì´ë¯¸ ëˆ„ê°€ ì˜ ë§Œë“¤ì–´ë†¨ê² ì§€~ ğŸ¤­"], scores: ["L", "F"] },
        { category: "L/F", text: "ëª¨ì„ì— ë‚˜ì˜¤ê¸´ í–ˆëŠ”ë°â€¦ ë¶„ìœ„ê¸°ê°€ ìƒê°ì´ë‘ ë‹¤ë¥´ë‹¤. ì–´ë–¡í•˜ì§€?", options: ["ì´ê±´ ì¢€ ë°”ê¾¸ëŠ” ê²Œ ì–´ë•Œìš”? âœ‹", "ë­, ì¢‹ì€ ê²Œ ì¢‹ì€ ê±°ì§€~ ì ë‹¹íˆ ë§ì¶°ì¤€ë‹¤! ğŸ‘Œ"], scores: ["L", "F"] },
        { category: "L/F", text: "ì†Œëª¨ì„ì—ì„œ ìƒˆë¡œìš´ í™œë™ì„ í•œë‹¤. ì´ ë•Œ ë‚˜ëŠ”?", options: ["ì ê·¹ì ìœ¼ë¡œ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë ¤ë³´ì! ğŸ’¡", "ëˆ„ê°€ ì•Œì•„ì„œ í•´ì£¼ê² ì§€â€¦ ë‚œ ê·¸ëƒ¥ ì°¸ì—¬í• ë˜~ ğŸ’¤"], scores: ["L", "F"] },

        // 3ï¸âƒ£ í™œë™ ì„±í–¥ (A/T) - ê¸°ì¡´ 2ï¸âƒ£ì„ 3ï¸âƒ£ìœ¼ë¡œ ì´ë™
        { category: "A/T", text: "ì´ë²ˆ ì£¼ë§ì—ëŠ” ë­í•˜ì§€?", options: ["ë­ë¼ë„ í•´ì•¼ì§€! ì¹œêµ¬ë“¤ì—ê²Œ ì—°ë½ ğŸ“", "ì´ë¶ˆ ë°–ì€ ìœ„í—˜í•´. ì§‘ì—ì„œ ì‰´ë˜~ ğŸ›"], scores: ["A", "T"] },
        { category: "A/T", text: "ì°¸ì—¬í•  ì†Œëª¨ì„ì„ ê³¨ë¼ë³´ì. ë‚´ê°€ ëŒë¦¬ëŠ” ì†Œëª¨ì„ì€?", options: ["ë‚˜ê°€ì„œ ëª¸ ì¢€ ì¨ì•¼ ì œë§›ì´ì§€! ğŸƒâ€", "ì•‰ì•„ì„œ í•˜ëŠ” ê²Œ ì¢‹ì•„~ ğŸ§â€â™€ï¸"], scores: ["A", "T"] },
        { category: "A/T", text: "ì˜¤ëŠ˜ë„ í˜ë“  í•˜ë£¨ì˜€ë‹¤. ë‚˜ì˜ íë§ì€?", options: ["ì–˜ë“¤ì•„ ë­í•´? ë‚˜ì™€! ì¹œêµ¬ë“¤ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ ğŸ‰", "ì§‘ì— ê°€ì„œ í˜¼ì ì˜í™”ë‚˜ ë³¼ê¹Œ? ì¡°ìš©íˆ íë§ ğŸ“º"], scores: ["A", "T"] },

        // 2ï¸âƒ£ ì†Œí†µ ìŠ¤íƒ€ì¼ (S/I) - ê¸°ì¡´ 3ï¸âƒ£ì„ 2ï¸âƒ£ë¡œ ì´ë™
        { category: "S/I", text: "ì†Œëª¨ì„ ì²« ë‚ ! ëª¨ì„ ì¥ì†Œì— ë„ì°©í•œ ë‚˜ëŠ”â€¦", options: ["ë¨¼ì € ë§ ê±¸ì–´ì•¼ì§€! ğŸ˜„", "ì¼ë‹¨ ëˆˆì¹˜ ì¢€ ë³´ìâ€¦ ğŸ™„"], scores: ["S", "I"] },
        { category: "S/I", text: "ì˜† ì‚¬ëŒì´ ë§ì„ ê±¸ì–´ì˜¨ë‹¤! ì–´ë–»ê²Œ ëŒ€ë‹µí• ê¹Œ?", options: ["ì ê·¹ì ìœ¼ë¡œ ëŒ€í™” ì‹œì‘! ğŸ˜‰", "ì–´ìƒ‰í•˜ê²Œ ëŒ€ë‹µí•´ë³¸ë‹¤ ğŸ˜"], scores: ["S", "I"] },
        { category: "S/I", text: "ì§‘ì— ê°€ëŠ” ê¸¸. ì˜¤ëŠ˜ì€ ì´ ë•Œê°€ ì œì¼ ì¬ë°Œì—ˆì§€â€¦", options: ["ë‹¤ ê°™ì´ ë– ë“¤ë©´ì„œ ì›ƒê³  ë§ˆì…¨ë˜ ìˆœê°„ ğŸ»", "ì†Œìˆ˜ë¼ë¦¬ ê¹Šì€ ì–˜ê¸°ë¥¼ ë‚˜ëˆ´ë˜ ìˆœê°„ â˜•"], scores: ["S", "I"] },

        // 4ï¸âƒ£ ëª¨ì„ ëª©í‘œ (E/D)
        { category: "E/D", text: "ë‚´ê°€ ì†Œëª¨ì„ì—ì„œ ê°€ì¥ ì–»ê³  ì‹¶ì€ ê±´?", options: ["ìƒˆë¡œìš´ ê²½í—˜! ì¸ë§¥ê³¼ ì¶”ì–µ ğŸ”¥", "ë°°ì›€ê³¼ ì„±ì¥, ê¹Šì´ ìˆëŠ” í™œë™ ğŸ“š"], scores: ["E", "D"] },
        { category: "E/D", text: "ë‚´ê°€ ì·¨ë¯¸ë¥¼ ì •í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê²ƒì€?", options: ["ì´ê²ƒì €ê²ƒ ì‹œë„í•´ë³´ì! ğŸ¨", "í•˜ë‚˜ë¥¼ ì œëŒ€ë¡œ ë§ˆìŠ¤í„°í•˜ì! ğŸ”¬"], scores: ["E", "D"] },
        { category: "E/D", text: "ì†Œëª¨ì„ í™œë™ì´ ëë‚¬ë‹¤. ì´ì œ ë‚˜ëŠ”â€¦", options: ["ë‹¤ìŒì—” ë˜ ë­˜ í•´ë³¼ê¹Œ? ğŸ„â€â™€ï¸", "ì˜¤ëŠ˜ ê²½í—˜ì„ ì •ë¦¬í•˜ë©° ê¹Šì´ ìƒê° ğŸ¤“"], scores: ["E", "D"] }
    ];

    const mobtiTypes = {
        "LASE": "ğŸª íŒŒí‹° í”Œë˜ë„ˆ",
        "LASD": "âš¡ ë¶„ìœ„ê¸° ì„¼í„°",
        "LTSE": "ğŸ¤ ì†Œì…œ íë ˆì´í„°",
        "LTSD": "ğŸ“š ì§€ì‹ íƒí—˜ê°€",
        "LAIE": "ğŸ• ì±Œë¦°ì €",
        "LAID": "ğŸ— ìš´ì˜ì˜ ë‹¬ì¸",
        "LTIE": "ğŸ¨ ìŠ¤í† ë¦¬í…”ëŸ¬",
        "LTID": "ğŸ’¡ ì§€ì‹ ë‹¤ì´ë²„",
        "FASE": "ğŸ„ ììœ ë¡œìš´ ì˜í˜¼",
        "FASD": "ğŸ­ ë¬´ë“œë©”ì´ì»¤",
        "FTSE": "â˜• ìˆ˜ë‹¤ìŸì´",
        "FTSD": "ğŸ“– ë¶ ì†Œë¯ˆë¦¬ì—",
        "FAIE": "ğŸš¶â€â™€ï¸ ë°©ë‘ì",
        "FAID": "ğŸ® í˜¼ë†€ ë§ˆìŠ¤í„°",
        "FTIE": "ğŸ–Œ ê°ì„± í¬ë¦¬ì—ì´í„°",
        "FTID": "ğŸ¡ íë§ ë©”ì´íŠ¸"
    };

    const mobtiImages = {
        "LASE": "/img/mobti/LASE.png",
        "LASD": "/img/mobti/LASD.png",
        "LTSE": "/img/mobti/LTSE.png",
        "LTSD": "/img/mobti/LTSD.png",
        "LAIE": "/img/mobti/LAIE.png",
        "LAID": "/img/mobti/LAID.png",
        "LTIE": "/img/mobti/LTIE.png",
        "LTID": "/img/mobti/LTID.png",
        "FASE": "/img/mobti/FASE.png",
        "FASD": "/img/mobti/FASD.png",
        "FTSE": "/img/mobti/FTSE.png",
        "FTSD": "/img/mobti/FTSD.png",
        "FAIE": "/img/mobti/FAIE.png",
        "FAID": "/img/mobti/FAID.png",
        "FTIE": "/img/mobti/FTIE.png",
        "FTID": "/img/mobti/FTID.png"
    };

    let scores = { L: 0, F: 0, A: 0, T: 0, S: 0, I: 0, E: 0, D: 0 };
    let currentQuestionIndex = 0;

    function showQuestion() {
        if (currentQuestionIndex >= questions.length) {
            showResult();
            return;
        }
        const question = questions[currentQuestionIndex];
        $("#question-text").text(question.text);
        const options = $(".option");
        options.eq(0).text(question.options[0]);
        options.eq(1).text(question.options[1]);
        $("#progress").text(`${currentQuestionIndex + 1} / ${questions.length}`);
    }

    function showResult() {
        $("#question-container").hide();
        $("#result-container").show();

        let resultType = `${scores.L > scores.F ? "L" : "F"}${scores.A > scores.T ? "A" : "T"}${scores.S > scores.I ? "S" : "I"}${scores.E > scores.D ? "E" : "D"}`;
        let resultName = mobtiTypes[resultType] || "ì•Œ ìˆ˜ ì—†ëŠ” ìœ í˜•";
        let resultImage = mobtiImages[resultType] || "/img/mobti/default.png";

        $("#result-text").text(`ë‹¹ì‹ ì˜ MoBTI ìœ í˜•: ${resultType} (${resultName})`);
        $("#result-img").attr("src", resultImage).attr("alt", resultName);
    }
</script>
</body>
</html>